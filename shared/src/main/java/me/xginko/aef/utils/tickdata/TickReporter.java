package me.xginko.aef.utils.tickdata;

import me.xginko.aef.utils.models.Disableable;
import org.bukkit.plugin.java.JavaPlugin;

import java.time.Duration;

public interface TickReporter extends Disableable {

    double getGlobalTPS();
    double getTPS();
    double getGlobalMSPT();
    double getMSPT();

    static TickReporter create(JavaPlugin plugin, Duration cacheDuration) throws NoSuchMethodException {
        if (FoliaTickReporter.isSupported()) {
            return new FoliaTickReporter(cacheDuration);
        }

        if (ModernPaperTickReporter.isSupported()) {
            return new ModernPaperTickReporter(plugin, cacheDuration);
        }

        if (LegacyPaperTickReporter.isSupported()) {
            return new LegacyPaperTickReporter(plugin, cacheDuration);
        }

        throw new NoSuchMethodException("Unable to get TPS or MSPT on this server version!");
    }
}